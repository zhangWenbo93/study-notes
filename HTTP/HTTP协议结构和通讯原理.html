<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP 协议结构和通讯原理 | Notes</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="自我学习">
    
    <link rel="preload" href="/study-notes/assets/css/0.styles.f313a13a.css" as="style"><link rel="preload" href="/study-notes/assets/js/app.039e21f8.js" as="script"><link rel="preload" href="/study-notes/assets/js/2.c66ffe4c.js" as="script"><link rel="preload" href="/study-notes/assets/js/5.45c26daa.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/10.1f4a0ba6.js"><link rel="prefetch" href="/study-notes/assets/js/11.3f135838.js"><link rel="prefetch" href="/study-notes/assets/js/12.6d5c0016.js"><link rel="prefetch" href="/study-notes/assets/js/13.385e80e5.js"><link rel="prefetch" href="/study-notes/assets/js/14.0abbf9c6.js"><link rel="prefetch" href="/study-notes/assets/js/15.f1a675c1.js"><link rel="prefetch" href="/study-notes/assets/js/16.cff045ba.js"><link rel="prefetch" href="/study-notes/assets/js/17.1b9fa201.js"><link rel="prefetch" href="/study-notes/assets/js/18.15b4e5fe.js"><link rel="prefetch" href="/study-notes/assets/js/19.96819d01.js"><link rel="prefetch" href="/study-notes/assets/js/20.3d35b0e0.js"><link rel="prefetch" href="/study-notes/assets/js/21.b1b57cb8.js"><link rel="prefetch" href="/study-notes/assets/js/22.33771dfd.js"><link rel="prefetch" href="/study-notes/assets/js/23.a732b160.js"><link rel="prefetch" href="/study-notes/assets/js/24.24b15227.js"><link rel="prefetch" href="/study-notes/assets/js/25.69c4ed30.js"><link rel="prefetch" href="/study-notes/assets/js/26.78ff0822.js"><link rel="prefetch" href="/study-notes/assets/js/27.fe95212f.js"><link rel="prefetch" href="/study-notes/assets/js/28.7ad1509a.js"><link rel="prefetch" href="/study-notes/assets/js/29.61218e4f.js"><link rel="prefetch" href="/study-notes/assets/js/3.63146466.js"><link rel="prefetch" href="/study-notes/assets/js/30.f23314bb.js"><link rel="prefetch" href="/study-notes/assets/js/31.cdae011c.js"><link rel="prefetch" href="/study-notes/assets/js/32.60127ca6.js"><link rel="prefetch" href="/study-notes/assets/js/33.ff9cf28d.js"><link rel="prefetch" href="/study-notes/assets/js/34.7746944f.js"><link rel="prefetch" href="/study-notes/assets/js/35.0216b661.js"><link rel="prefetch" href="/study-notes/assets/js/36.fcf7055f.js"><link rel="prefetch" href="/study-notes/assets/js/37.6e2d7c68.js"><link rel="prefetch" href="/study-notes/assets/js/38.a9661128.js"><link rel="prefetch" href="/study-notes/assets/js/39.f25b8af3.js"><link rel="prefetch" href="/study-notes/assets/js/4.1b408ca5.js"><link rel="prefetch" href="/study-notes/assets/js/40.b2812eac.js"><link rel="prefetch" href="/study-notes/assets/js/41.e63c192c.js"><link rel="prefetch" href="/study-notes/assets/js/42.91310054.js"><link rel="prefetch" href="/study-notes/assets/js/43.195adb7b.js"><link rel="prefetch" href="/study-notes/assets/js/44.b82e0971.js"><link rel="prefetch" href="/study-notes/assets/js/45.54e35d71.js"><link rel="prefetch" href="/study-notes/assets/js/46.4b06e4d8.js"><link rel="prefetch" href="/study-notes/assets/js/47.c58d11ab.js"><link rel="prefetch" href="/study-notes/assets/js/48.69319e05.js"><link rel="prefetch" href="/study-notes/assets/js/49.81df32c4.js"><link rel="prefetch" href="/study-notes/assets/js/50.b86cd1f2.js"><link rel="prefetch" href="/study-notes/assets/js/51.48962766.js"><link rel="prefetch" href="/study-notes/assets/js/52.d5814608.js"><link rel="prefetch" href="/study-notes/assets/js/53.12683cf2.js"><link rel="prefetch" href="/study-notes/assets/js/54.7f8f2a18.js"><link rel="prefetch" href="/study-notes/assets/js/55.397b6083.js"><link rel="prefetch" href="/study-notes/assets/js/56.ab7945ea.js"><link rel="prefetch" href="/study-notes/assets/js/57.d03d45cb.js"><link rel="prefetch" href="/study-notes/assets/js/58.bae8dfce.js"><link rel="prefetch" href="/study-notes/assets/js/59.c7d972b0.js"><link rel="prefetch" href="/study-notes/assets/js/6.ceefd9a6.js"><link rel="prefetch" href="/study-notes/assets/js/60.50c38210.js"><link rel="prefetch" href="/study-notes/assets/js/61.2d11d07c.js"><link rel="prefetch" href="/study-notes/assets/js/62.6b2af576.js"><link rel="prefetch" href="/study-notes/assets/js/63.826c65fe.js"><link rel="prefetch" href="/study-notes/assets/js/64.9960e579.js"><link rel="prefetch" href="/study-notes/assets/js/65.ff4ea3f1.js"><link rel="prefetch" href="/study-notes/assets/js/66.f6631330.js"><link rel="prefetch" href="/study-notes/assets/js/67.d010895e.js"><link rel="prefetch" href="/study-notes/assets/js/68.55195346.js"><link rel="prefetch" href="/study-notes/assets/js/69.05dc4f2e.js"><link rel="prefetch" href="/study-notes/assets/js/7.22afd591.js"><link rel="prefetch" href="/study-notes/assets/js/70.9b1fb209.js"><link rel="prefetch" href="/study-notes/assets/js/71.eff503c4.js"><link rel="prefetch" href="/study-notes/assets/js/72.1c282bd5.js"><link rel="prefetch" href="/study-notes/assets/js/73.6258956d.js"><link rel="prefetch" href="/study-notes/assets/js/74.8debcd50.js"><link rel="prefetch" href="/study-notes/assets/js/75.4cef4522.js"><link rel="prefetch" href="/study-notes/assets/js/76.b4268a30.js"><link rel="prefetch" href="/study-notes/assets/js/77.0ec777b3.js"><link rel="prefetch" href="/study-notes/assets/js/8.c8a1b87b.js"><link rel="prefetch" href="/study-notes/assets/js/9.f05e9459.js">
    <link rel="stylesheet" href="/study-notes/assets/css/0.styles.f313a13a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-notes/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-notes/koa2/restful.html" class="nav-link">
  koa2
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/design-patterns/面向对象_01.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/interview-advanced/mind-mapping.html" class="nav-link">
  能力进阶
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/cms-vue/advance.html" class="nav-link">
  vue koa 实现后台管理
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/HTTP/了解HTTP协议.html" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/node/Node.js在前后端的区别.html" class="nav-link">
  node应用开发
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-notes/koa2/restful.html" class="nav-link">
  koa2
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/design-patterns/面向对象_01.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/interview-advanced/mind-mapping.html" class="nav-link">
  能力进阶
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/cms-vue/advance.html" class="nav-link">
  vue koa 实现后台管理
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/HTTP/了解HTTP协议.html" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/study-notes/node/Node.js在前后端的区别.html" class="nav-link">
  node应用开发
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTTP协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study-notes/HTTP/了解HTTP协议.html" class="sidebar-link">了解HTTP协议</a></li><li><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html" class="active sidebar-link">HTTP协议结构和通讯原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#协议特点" class="sidebar-link">协议特点</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#uri-和-url" class="sidebar-link">URI 和 URL</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#http-报文结构分析" class="sidebar-link">HTTP 报文结构分析</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#请求报文" class="sidebar-link">请求报文</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#响应报文" class="sidebar-link">响应报文</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#请求方法剖析" class="sidebar-link">请求方法剖析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#get" class="sidebar-link">GET</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#post" class="sidebar-link">POST</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#put" class="sidebar-link">PUT</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#head" class="sidebar-link">HEAD</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#delete" class="sidebar-link">DELETE</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#options" class="sidebar-link">OPTIONS</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#trace" class="sidebar-link">TRACE</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#connect" class="sidebar-link">CONNECT</a></li></ul></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#状态码" class="sidebar-link">状态码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#状态码详解" class="sidebar-link">状态码详解</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#常用状态码" class="sidebar-link">常用状态码</a></li></ul></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#http-状态管理-cookie-与-session" class="sidebar-link">HTTP 状态管理：Cookie 与 Session</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#cookie" class="sidebar-link">Cookie</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#session" class="sidebar-link">Session</a></li><li class="sidebar-sub-header"><a href="/study-notes/HTTP/HTTP协议结构和通讯原理.html#cookie-与-session-的不同" class="sidebar-link">Cookie 与 Session 的不同</a></li></ul></li></ul></li><li><a href="/study-notes/HTTP/HTTP的特性和使用.html" class="sidebar-link">HTTP的特性和使用</a></li><li><a href="/study-notes/HTTP/安全的HTTPS.html" class="sidebar-link">安全的HTTPS</a></li><li><a href="/study-notes/HTTP/基于HTTP追加协议.html" class="sidebar-link">基于HTTP追加协议</a></li><li><a href="/study-notes/HTTP/Web安全威胁浅析.html" class="sidebar-link">Web安全威胁浅析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http-协议结构和通讯原理"><a href="#http-协议结构和通讯原理" class="header-anchor">#</a> HTTP 协议结构和通讯原理</h1> <h2 id="协议特点"><a href="#协议特点" class="header-anchor">#</a> 协议特点</h2> <ul><li>支持客户/服务器模式
<ul><li>客户/服务器模式工作的方式是由客户端向服务器发出请求， 服务器响应请求，并进行相应服务。
<img src="/study-notes/assets/img/11.c72458c9.png" alt="图示"></li></ul></li> <li>简单快速
<ul><li>客户向服务器请求服务时，只需传送请求方法和路径</li> <li>请求方法常用的有 GET、POST、HEAD，每种方法规定了客户和服务器联系的类型不同</li> <li>由于 HTTP 协议简单，使得 HTTP 服务器的程序规模小，因而同心速度很快</li></ul></li> <li>灵活
<ul><li>HTTP 允许传输任意类型的数据对象</li> <li>正在传输的类型由 Content-type（Content-type是HTTP包中用来表示内容类型的标识）加以标记</li></ul></li> <li>无连接
<ul><li>无连接的含义是限制每次连接只处理一个请求</li> <li>服务器处理完客户端的请求，病收到客户的应答后，即断开连接</li> <li>采用这种方式可以节省传输时间</li></ul></li> <li>无状态
<ul><li>HTTP 协议是无状态协议</li> <li>无状态是协议对于事务处理没有记忆能力，缺少状态意味着如果后续处理需要前面的信息，则需要重新传输，这样可能会导致每次连续传送的数据量增大</li> <li>另一方面，在服务器不需要先前信息时它的应答就较快</li></ul></li></ul> <h2 id="uri-和-url"><a href="#uri-和-url" class="header-anchor">#</a> URI 和 URL</h2> <blockquote><p>我们在浏览器里的Web地址应该叫 URL 还是 URI ？</p></blockquote> <p>URI 是一个紧凑的字符串用来标示抽象或物理资源，一个 URI 可以进一步被分解为定位符、名字或者两者都是，而我们常说的 URL（Uniform Resource Locator）其实是 URI 的子集，除了确定一个资源，还提供一种定位该资源的主要访问机制（比如网络“位置”）。</p> <p>URI 可以被分为 URL ，URN 或同时具备 locators 和 names 特性的一个东西，URN 的作用就好像一个人的名字，URL 就像是一个人的地址，通俗地讲，就是 URN 确定了东西的身份，而 URL 提供了找到它的方式。</p> <p>所谓的 URL 是 URI 的一种，但不是所有的 URI 都是 URL，URI 和 URL 最大的差别就是“访问机制”，URN 则是唯一标识的一部分，是身份信息。</p> <blockquote><p>思考：以下哪些是 URI，哪些是 URL，哪些是 URN ？</p></blockquote> <p>① ftp://ftp.is.co.za/rfc/rfc1808.txt<br>
②  http://www.ietf.org/rfc/rfc2309.txt<br>
③ ldap://[2001:db8::7]/c=GB?objectClass?one<br>
④ mailto:John.Doe@example.com<br>
⑤ news:comp.infosystems.www.servers.unix<br>
⑥ tel:+1-816-555-1212<br>
⑦ telnet://192.0.21.16:80/<br>
⑧ urn:oasis:names:specification:docbook:dtd:xml:4.1.2</p> <p>以上全部都是 URI，而提供了访问机制的① ② ③ ④ ⑤ ⑦则是 URL， ⑧则是 URN。</p> <p>回到最开始的问题，浏览器中输入的是 URI 还是 URL，这里说是 URI 可能会更准确，更专业，因为经常使用的 URI 不是严格技术意义上的 URL，比如说你所需要的文件在 google.com，这是 URI 而不是 URL，系统可能会对很多协议和端口做出正确的访问，比如说当对(https://www.google.com)或者(ftp://www.google.com)进行访问时，可能会得到不同的访问结果，所以从这个技术角度出发，我们称之为 URI，但为了通俗易懂，URL可能会被大众所熟记。</p> <h2 id="http-报文结构分析"><a href="#http-报文结构分析" class="header-anchor">#</a> HTTP 报文结构分析</h2> <h2 id="请求报文"><a href="#请求报文" class="header-anchor">#</a> 请求报文</h2> <p>下图是一个完整的请求报文：</p> <p><img src="/study-notes/assets/img/12.753a07f2.png" alt="图示"></p> <p>从中我们可以看出请求报文的重要组成部分，可大体分为三类，请求行、请求报文头、请求报文体，而其中的<strong>报文头大体可以分为四类</strong>，在 HTTP/1.1中，统共规范了标准化的<strong>47</strong>种报文头字段。</p> <ul><li>通用报文头
<ul><li><img src="/study-notes/assets/img/13.fd4a7dc8.png" alt="图示"></li> <li>可以用在请求报文也可以用在响应报文</li> <li>Connection
<ul><li>keep-alive 当一个网页打开完成之后，客户端和服务器之间用于传输 HTTP 数据的 TCP 链接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接</li> <li>close 表示一个 Request 完成后，客户端和服务器之间用于传输 HTTP 数据的 TCP 连接会关闭，当客户端再次发哦是发送请求时，需要重新建立 TCP 连接</li></ul></li> <li>Referer 这个字段是当浏览器发送请求时，一般都会带上，告诉服务器请求是从哪个页面连接过来的，服务器籍此可以获得一些信息用于处理</li> <li>User-Agent 很多情况下会根据此字段判断浏览器类型，做不同的兼容性设计</li></ul></li> <li>请求报文头
<ul><li><img src="/study-notes/assets/img/14.fb2c075d.png" alt="图示"></li> <li>专用在请求报文</li> <li>Accept 如果想要给现实的媒体类型增加优先级，则用 q= 来额外的表示权重（q 的范围是0~1，可精确到小数点后三位），1 最大，不指定时默认为 q=1.0</li> <li>Accept-Language:zh-cn,zh;q=0.7,en-us,en;q=0.3 表示客户端在服务器有中文资源的情况下，会请求其返回中文版对应的响应，没有时则响应英文版</li></ul></li> <li>响应报文头
<ul><li><img src="/study-notes/assets/img/15.51fe210b.png" alt="图示"></li> <li>专用在响应报文</li></ul></li> <li>实体报文头
<ul><li><img src="/study-notes/assets/img/16.1cd4b1d6.png" alt="图示"></li></ul></li></ul> <h2 id="响应报文"><a href="#响应报文" class="header-anchor">#</a> 响应报文</h2> <p>下图是一个完整的响应报文：</p> <p><img src="/study-notes/assets/img/17.8c067c4c.png" alt="图示"></p> <p>从中我们可以看出响应报文的重要组成部分，可大体分为三类，响应行、响应头、响应体：</p> <ul><li>响应行：涉及报文协议及版本、状态码及状态描述</li> <li>响应头：响应头也是报文头，和之前提及的请求报文头比较类似，一般包含服务器类型，响应数据类型、产生时间等等</li> <li>响应体：响应报文的主体，会对返回的内容进行解析，最终处理到系统中去。</li></ul> <h2 id="请求方法剖析"><a href="#请求方法剖析" class="header-anchor">#</a> 请求方法剖析</h2> <p>以下是在 HTTP/1.1 常用请求方法：</p> <ul><li>GET</li> <li>POST</li> <li>PUT</li> <li>HEAD</li> <li>DELETE</li> <li>OPTIONS</li> <li>TRACE</li> <li>CONNECT</li></ul> <h3 id="get"><a href="#get" class="header-anchor">#</a> GET</h3> <p>GET 方法用来请求访问已被 URI 识别的资源，会将指定的资源经服务端解析后返回响应的内容，是默认的 HTTP 的请求方法，比如说当在浏览器中直接输入请求的 URI 时，浏览器采用的就是 GET 方法。</p> <p>一般我们通过 GET 传递数据时，会用过？以及 &amp; 的方式对参数进行拼接然后缀在 URL 的后面，此时参数会作为 URL 的一部分向服务端进行请求发送。</p> <p>当参数作为 URL 的一部分参与请求时，提交的数据量不能过大，这是因为浏览器对于 URL 的长度有一定的限制，IE 的限制长度为 2803，Firefox 的限制长度为 Chrome 的限制长度为 8182，Safari 的限制长度为 80000。</p> <p>GET 可以迎来提交表单和其他数据：</p> <div class="language-js extra-class"><pre class="language-js"><code>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">/</span>login<span class="token operator">?</span>username<span class="token operator">=</span>zhangsan<span class="token operator">&amp;</span>password<span class="token operator">=</span><span class="token number">123456</span>
</code></pre></div><p>从上面的 URL 请求中我们可以非常容易的辨认出表单提交的内容，因此 GET 提交数据时一般会有一定的安全隐患，再者就是由于浏览器的长度限制。</p> <h3 id="post"><a href="#post" class="header-anchor">#</a> POST</h3> <p>POST 方法其实是后续对 GET 方法的一种替代方法，两者功能类似，不过 POST 的主要目的不是获取响应主体的内容，一般用来传输实体的主体，做提交请求。</p> <p><img src="/study-notes/assets/img/18.297c6005.png" alt="图示"></p> <p>通过 POST 提交数据时，请求报文会发生变化，会在请求报文头下<strong>空行</strong>，然后下面就是要提交的表单数据。POST 方法克服了 GET 请求的一部分缺点，数据不会作为 URL 请求的一部分，而是作为标准数据传输给服务器，这就避免了 GET 请求中数据无法保密和数据量小的问题。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>公共电脑下会通过查看浏览器记录而得到 GET 请求的一些信息，而 POST 就不会</p></div> <h3 id="put"><a href="#put" class="header-anchor">#</a> PUT</h3> <p>PUT 方法从客户端向服务器传送的数据取代指定的文档的内容，PUT 方法和 POST 方法在使用上是基本相同的，都是用来提交参数的最大的不同点就是 PUT 是幂等的，而 POST 是不幂等的，因此更多时候使用 PUT 方法用作传输资源。</p> <p>HTTP/1.1 中的 PUT 方法不带有验证机制，其存在一定的安全性问题，所以一般的 Web 网站应用不太常用 PUT 方法。</p> <h3 id="head"><a href="#head" class="header-anchor">#</a> HEAD</h3> <p>HEAD 方法类似于 GET 请求，只不过 HEAD 方法只是请求消息的报文头而不是完整的内容，返回的响应中没有具体的内容，用于获取报文头。</p> <p>对于 HEAD 方法的回应部分来说，它的 HTTP 头部信息中包含的信息和 GET 请求得到的信息是相同的，所以利用这个方法就可以不必传输整个的资源内容，就可以得到想要请求的 Request URI 所标识的资源信息。</p> <p>通常用 HEAD 测试超链接资源的有效性。</p> <h3 id="delete"><a href="#delete" class="header-anchor">#</a> DELETE</h3> <p>DELETE 方法是跟 PUT 方法相反的方法，用来请求服务器删除指定的资源。</p> <p>HTTP/1.1 中的 DELETE 方法不带有验证机制，其存在一定的安全性问题，所以一般的 Web 网站应用不太常用 DELETE 方法。</p> <h3 id="options"><a href="#options" class="header-anchor">#</a> OPTIONS</h3> <p>OPTIONS 方法用来查询针对请求 URI 指定的资源支持的方法，当我们不知道对方服务端支持什么请求方式时，进行一个询问。</p> <h3 id="trace"><a href="#trace" class="header-anchor">#</a> TRACE</h3> <p>TRACE 方法主要用于回显服务器收到的请求，主要用于测试和诊断。客户端可以通过 TRACE 方法查询发送出去的请求是如何被加工需改过，或者说是被篡改，当一个请求想要连接原目标服务器时，可能会通过代理中转，TRACE 方法就是用来确认连接过程中发生的一系列操作，看看中转的过程。</p> <p>由于 TRACE 不常用，而且容易引发 XST（跨站追踪）攻击，所以一般不用。</p> <h3 id="connect"><a href="#connect" class="header-anchor">#</a> CONNECT</h3> <p>CONNECT 方法会开启一个客户端和所请求资源之间的双相沟通的通道，可以用来创建隧道。</p> <p>Web 网页开发时基本不会用到，一般在使用代理服务器访问互联网的时候，会使用 CONNECT 方法。比如，通过一个 HTTP 代理访问谷歌，首先浏览器会向代理服务器发送一个 CONNECT 请求，代理服务器返回 HTTP 200 这个状态码，表示请求成功，连接建立，之后浏览器就会和服务器进行握手并交换数据，代理服务器只负责传输彼此的数据包，并不能读取具体的数据内容。</p> <h2 id="状态码"><a href="#状态码" class="header-anchor">#</a> 状态码</h2> <p>状态码是用来表示网页服务器超文本传输协议响应状态的3位数字代码。</p> <p><img src="/study-notes/assets/img/17.8c067c4c.png" alt="图示"></p> <h3 id="状态码详解"><a href="#状态码详解" class="header-anchor">#</a> 状态码详解</h3> <p><img src="/study-notes/assets/img/19.d6e8dbd3.png" alt="图示"></p> <h3 id="常用状态码"><a href="#常用状态码" class="header-anchor">#</a> 常用状态码</h3> <table><thead><tr><th>状态码</th> <th style="text-align:right;">状态码英文名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td>200</td> <td style="text-align:right;">OK</td> <td style="text-align:center;">请求已成功，请求所希望的响应头或数据体将随此响应返回</td></tr> <tr><td>202</td> <td style="text-align:right;">Accepted</td> <td style="text-align:center;">已接受，已经接受请求，但未完成处理</td></tr> <tr><td>206</td> <td style="text-align:right;">Partial Content</td> <td style="text-align:center;">部分内容，服务器成功处理了部分 GET 请求</td></tr> <tr><td>301</td> <td style="text-align:right;">Moved Permanently</td> <td style="text-align:center;">永久移动，请求的资源一杯永久的移动到新 URI，返回信息会包括新的 URI，浏览器会自动定向到新的 URI。今后任何新的请求都应使用新的 URI 代替</td></tr> <tr><td>302</td> <td style="text-align:right;">Found</td> <td style="text-align:center;">临时移动，与301类似。但资源只是临时被移动，客户端应继续使用原有的 URI</td></tr> <tr><td>400</td> <td style="text-align:right;">Bad Request</td> <td style="text-align:center;">客户端请求的语法错误，服务器无法理解</td></tr> <tr><td>401</td> <td style="text-align:right;">Unauthorized</td> <td style="text-align:center;">请求要求用户的身份认证</td></tr> <tr><td>403</td> <td style="text-align:right;">Forbidden</td> <td style="text-align:center;">服务器理解请求客户端的请求，但拒绝执行此请求</td></tr> <tr><td>404</td> <td style="text-align:right;">Not Found</td> <td style="text-align:center;">服务器无法根据客户端的请求找到资源（网页）</td></tr> <tr><td>500</td> <td style="text-align:right;">Internal Server Error</td> <td style="text-align:center;">服务器内部错误，无法完成请求</td></tr> <tr><td>502</td> <td style="text-align:right;">Bad Gateway</td> <td style="text-align:center;">充当网关或代理的服务器，从远端服务器接收到一个无效的请求</td></tr></tbody></table> <h2 id="http-状态管理-cookie-与-session"><a href="#http-状态管理-cookie-与-session" class="header-anchor">#</a> HTTP 状态管理：Cookie 与 Session</h2> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> Cookie</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Cookie 实际上是一小段的文本信息</p></div> <p>当客户端请求服务器，如果服务器需要记录该用户的状态，就像客户端浏览器发送一个 Cookie。客户端浏览器就会把 Cookie 保存起来，当浏览器再次请求该网站时，浏览器把请求的网址连同该 Cookie 一同提交给服务器，服务器检查该 Cookie ，以此来辨认用户状态。</p> <p><img src="/study-notes/assets/img/20.7fefce3c.png" alt="图示"></p> <h4 id="cookie-工作原理"><a href="#cookie-工作原理" class="header-anchor">#</a> Cookie 工作原理</h4> <p><img src="/study-notes/assets/img/21.cc21c148.png" alt="图示"></p> <h3 id="session"><a href="#session" class="header-anchor">#</a> Session</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Session 是另一种记录客户状态的机制，保存在服务器上</p></div> <p>客户端浏览器访问服务器的时候，服务器把客户端的信息以某种形式记录在服务器上。客户端浏览器再次访问时只需要从该 Session 中查找该客户的状态就可以了。</p> <h4 id="session-工作原理"><a href="#session-工作原理" class="header-anchor">#</a> Session 工作原理</h4> <p><img src="/study-notes/assets/img/22.1e962b07.png" alt="图示"></p> <h4 id="session-id-的存储"><a href="#session-id-的存储" class="header-anchor">#</a> Session ID 的存储</h4> <ul><li>Cookie
<ul><li>通过 Cookie 存储 Session ID 是最常见的存储方式</li> <li>由于可以人为的将客户端浏览器的 Cookie 禁用掉，所以不是唯一的存储方式</li></ul></li> <li>URL 重写
<ul><li>把 Session ID 直接附加在 URL 路径后面，作为附加信息进行传递
<ul><li>http://.../xxx;Sessionid=xxxxxxxxxxxxxxx</li></ul></li> <li>把 Session ID 直接附加在 URL 路径后面，作为查询参数
<ul><li>http://.../xxx?Sessionid=xxxxxxxxxxxxxxx</li></ul></li></ul></li> <li>隐藏表单
<ul><li>服务器会自动修改表单，添加一个隐藏的字段，以便表单提交的时候能够把 Session ID 传递到服务端</li></ul></li></ul> <h4 id="session-的有效期"><a href="#session-的有效期" class="header-anchor">#</a> Session 的有效期</h4> <ul><li>Session 超时失效
<ul><li>Session 和 Cookie 其实都可以设置有效时间，但 Cookie 的有效时间一般会比较久，而 Session 需要考虑越来越多的用户访问服务器，造成 Session 会越来越多，为了防止内存溢出，因此服务器会将长时间不使用的 Session 清除掉，这个时间就是 Session 的超时时间，如果超过超时时间没访问服务器，Session 就会自动失效</li></ul></li> <li>程序调用 HttpSession.invalidate()
<ul><li>当用户进行退出、注销等操作时，可以调用服务器该方法主动清除掉 Session</li></ul></li> <li>服务器进程被停止
<ul><li>服务器一般会把缓存放在内存里，当服务器异常终止时，一般情况下也会将 Session 清除掉</li></ul></li></ul> <h3 id="cookie-与-session-的不同"><a href="#cookie-与-session-的不同" class="header-anchor">#</a> Cookie 与 Session 的不同</h3> <ul><li>存放位置不同
<ul><li>Cookie 存储在客户端</li> <li>Session 存储在服务端</li></ul></li> <li>安全性（隐私策略）的不同
<ul><li>Cookie：由于其存放在浏览器，是可见的，因此可能会被客户端进行窥探、复制甚至篡改 Cookie 里面的内容，建议加密传输通过服务端解密</li> <li>Session：由于其存放在服务端，对客户端来说是透明的，不存在敏感信息泄露的风险</li></ul></li> <li>有效期上的不同</li> <li>对服务器的压力不同</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">6/2/2021, 5:53:09 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study-notes/HTTP/了解HTTP协议.html" class="prev">
        了解HTTP协议
      </a></span> <span class="next"><a href="/study-notes/HTTP/HTTP的特性和使用.html">
        HTTP的特性和使用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/study-notes/assets/js/app.039e21f8.js" defer></script><script src="/study-notes/assets/js/2.c66ffe4c.js" defer></script><script src="/study-notes/assets/js/5.45c26daa.js" defer></script>
  </body>
</html>
