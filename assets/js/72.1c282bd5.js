(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{527:function(t,a,v){"use strict";v.r(a);var _=v(40),r=Object(_.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"koa控制器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#koa控制器"}},[t._v("#")]),t._v(" Koa控制器")]),t._v(" "),v("h2",{attrs:{id:"控制器简介"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#控制器简介"}},[t._v("#")]),t._v(" 控制器简介")]),t._v(" "),v("ul",[v("li",[t._v("拿到路由分配的任务，并执行")]),t._v(" "),v("li",[t._v("在Koa中，控制器也是一个中间件")]),t._v(" "),v("li",[t._v("可以获取HTTP请求参数")]),t._v(" "),v("li",[t._v("可以处理业务逻辑，获取、计算、存储数据")]),t._v(" "),v("li",[t._v("根据不同的情况发送不用的HTTP响应")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"获取http请求参数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#获取http请求参数"}},[t._v("#")]),t._v(" 获取HTTP请求参数")]),t._v(" "),v("ul",[v("li",[t._v("Query String，如?q=keyword (参数获取ctx.request.query)")]),t._v(" "),v("li",[t._v("Router Params， 如/users/:id (参数获取ctx.params)")]),t._v(" "),v("li",[t._v('Body，如{ name: "张三" }，（放在链接中不安全，后台日志会将某些蒙安数据暴露在日志当中，在一个，浏览器对于拼接参数有长度限制） (参数获取ctx.request.body)')]),t._v(" "),v("li",[t._v("Header，如：Accept,Cookie (参数获取ctx.request.header)")])]),t._v(" "),v("h4",{attrs:{id:"操作步骤"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),v("ul",[v("li",[t._v("设置断点调试")]),t._v(" "),v("li",[t._v("获取query")]),t._v(" "),v("li",[t._v("获取router params")]),t._v(" "),v("li",[t._v("获取body")]),t._v(" "),v("li",[t._v("获取header")])]),t._v(" "),v("hr"),t._v(" "),v("h2",{attrs:{id:"发送http响应"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#发送http响应"}},[t._v("#")]),t._v(" 发送HTTP响应")]),t._v(" "),v("ul",[v("li",[t._v("发送status，如200、400等")]),t._v(" "),v("li",[t._v('发送Body，如{ name: "张三" }')]),t._v(" "),v("li",[t._v("Header，如：Allow,Content-type")])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"操作步骤-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-2"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),v("ul",[v("li",[t._v("将路有单独放在一个目录")]),t._v(" "),v("li",[t._v("将控制器单独放在一个目录")]),t._v(" "),v("li",[t._v("使用类+类方法的方式组织控制器")])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"编写控制器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#编写控制器"}},[t._v("#")]),t._v(" 编写控制器")]),t._v(" "),v("ul",[v("li",[t._v("每个资源都控制器放在不同的文件里")]),t._v(" "),v("li",[t._v("尽量使用类+类方法的形式编写控制器")]),t._v(" "),v("li",[t._v("需要有严谨的错误处理")])])])}),[],!1,null,null,null);a.default=r.exports}}]);