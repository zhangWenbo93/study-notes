(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{440:function(t,a,s){t.exports=s.p+"assets/img/7.c9c5f6f4.png"},520:function(t,a,s){"use strict";s.r(a);var e=s(40),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"渲染流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#渲染流程"}},[t._v("#")]),t._v(" 渲染流程")]),t._v(" "),e("h3",{attrs:{id:"初次渲染过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初次渲染过程"}},[t._v("#")]),t._v(" 初次渲染过程")]),t._v(" "),e("ul",[e("li",[t._v("解析模板为 render 函数（或在开发环境已完成，vue-loader）")]),t._v(" "),e("li",[t._v("触发响应式，监听 data 属性 getter，setter")]),t._v(" "),e("li",[t._v("执行 render 函数（此过程中已通过 with 触发响应式 get），生成 vnode，然后再执行 patch(elm,vnode) 过程")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("message"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            message"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hi'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发 get")]),t._v("\n            text"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不会触发 get，因为模板没用到，与视图无关")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"更新渲染过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新渲染过程"}},[t._v("#")]),t._v(" 更新渲染过程")]),t._v(" "),e("ul",[e("li",[t._v("修改 data 属性，触发 setter（此前在 getter 已被监听）")]),t._v(" "),e("li",[t._v("重新执行 render 函数，生成 newVnode，然后再执行 patch(vnode,newVnode) 过程")])]),t._v(" "),e("p",[t._v("完整的流程图如下，首先 Component Render Function 完成模板编译，生成 vnode（VDom tree），并且在 render 的过程中会 Touch Data 中的 getter产生依赖，此时会触发依赖收集，然后会通过 Watcher 将收集到的依赖观察起来。当去修改（setter） Data 中的数据时，会通过 Notify 触发 Watcher，看一下修改的数据是不是之前被依赖收集之后观察起来的数据，如果是的话，就会触发 Trigger re-render 重新渲染，生成新的 vnode，循环往复。")]),t._v(" "),e("p",[e("img",{attrs:{src:s(440),alt:"渲染流程图"}})]),t._v(" "),e("h3",{attrs:{id:"异步渲染"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#异步渲染"}},[t._v("#")]),t._v(" 异步渲染")]),t._v(" "),e("ol",[e("li",[t._v("vue 组件是异步渲染的，$nextTick 待 DOM 渲染完再回调")]),t._v(" "),e("li",[t._v("页面渲染时会将 data 的修改做整合，多次 data 修改只会渲染一次，一次性更新视图")]),t._v(" "),e("li",[t._v("减少 DOM 操作次数，提高性能")])])])}),[],!1,null,null,null);a.default=r.exports}}]);